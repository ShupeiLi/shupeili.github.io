---
layout: post
title: "复习日志：计算机网络"
categories: computer_networking
tags: [computer_networking, 国企]
math: true

---

## 基本概念

- 目前在计算机广域网中主要采用分组交换技术。
- 将模拟信号转化为数字信号的过程称为解调，将数字信号转化为模拟信号的过程称为调制。
- 网速指的是最高数据传输速率。
- 网络协议三要素是指语法、语义和同步。
- 计算机网络的三个主要组成部分是：若干主机、一个通信子网、一系列通信协议。
- 常见的数据交换方式是报文交换、分组交换、电路交换三种。
- 网络资源主要由硬件资源、软件资源和数据资源组成。
- 从用户角度看，互联网是一个全球范围的信息资源网，用户通过计算机网络获取资源，并不需要了解其中的结构。
- 一个计算机网络从功能组成上可以看成由两个部分组成，即通信子网和资源子网。通信子网负责数据传输，而资源子网负责数据处理。
- 计算机网络的拓扑结构主要取决于它的通信子网。
- ADSL（非对称数字用户线路）通过将电话线的频带划分为多个子频带，分别用于上行和下行数据传输，从而实现频分多路复用。
- 服务器分类
	- 按应用规模或性能分为入门级、部门级、企业级服务器。
	- 按用途可分为文件服务器、数据库服务器、Web 服务器。
	- 按体系结构分为 CISC、RISC、VLIW。
	- 按物理形态分为台式、机架式、机柜式服务器。
	- 按照服务器的结构来分可以分为塔式服务器、机架式服务器和刀片服务器，刀片服务器的每个刀是一块系统主板。
- 设备
	- DTE（Data Terminal Equipment，数据终端设备）：DTE 是数据通信中的终端设备（如计算机、路由器等），用于发送和接收数据。
	- DCE（Data Circuit-terminating Equipment，数据电路终接设备）：DCE 是提供入网连接点的设备，负责将 DTE 的数据转换为适合传输的信号，并通过网络传输。常见的 DCE 设备包括调制解调器（Modem）、交换机、路由器等。
	- NIC（Network Interface Card，网络接口卡）：NIC 是计算机内部的硬件组件，用于连接计算机与网络，但不直接提供入网连接点。
	- 提供传输介质与网络主机的接口电路的是网卡。网卡所实现的功能包含了数据链路层及物理层这两个层次的功能。
	- 集线器既不能隔离冲突域，又不能隔离广播域，网桥和交换机只能隔离冲突域，不能隔离广播域，路由器既能隔离冲突域，又能隔离广播域。
- 香农定理：根据香农定理（Shannon-Hartley 定理），最大数据传输率 \( C \) 可以通过以下公式计算：

	$$
	C = B \log_2(1 + \text{SNR})
	$$

	其中：
	- \( B \) 是信道带宽（Hz），
	- SNR 是信噪比（线性值，非分贝值）。
	- 例题：电话系统的信道带宽为 3000Hz，信噪比为 30dB，则该系统的最大数据传输率为 30 kbit/s。
		- $C = 3000\times \log_2 (1 + 10^{30 / 10}) \approx 30\text{ kbit/s}$
	- 例题：下列因素中，不会影响信道传输速率的是（D）。
		- A. 信噪比
		- B. 频率带宽
		- C. 调制速率
		- D. 信号传播速率
- 检验码
	- 海明码通过在数据位中插入多个校验位，利用这些校验位的奇偶性来检测和纠正错误。
	- 码距（汉明距离）是指两个有效编码之间不同的位数。海明码的码距必须大于等于 3，才能实现单比特错误的检测和纠正。
	- 奇偶校验码只能检测奇数个比特错误，且无法纠正错误。
	- 循环冗余校验码（CRC）的码距取决于生成多项式的选择，通常可以设计为大于 1 的码距，以实现更强的检错能力。
- 数据报
	- 数据报方式是一种无连接的网络服务，每个数据报独立传输，不需要预先建立连接。
	- 数据报方式具有动态路由选择能力，当某个节点失效时，数据报可以通过其他路径到达目的地，通信仍可进行。
	- 数据报方式需要在网络节点中进行存储转发，每个节点根据路由表将数据报转发到下一跳。
	- 数据报方式支持多播和广播，可以将一份报文发送给多个目的地。

## 物理层

- 在 OSI 参考模型中，物理层的功能是透明地传输比特流。
- 为了使模拟信号传输得更远，可以采用的设备是放大器。
- 以太网中的帧的最小长度是 64 字节。
- 根据以太网的二进制指数后退协议，在检测到 16 次冲突后，控制器会放弃数据的发送，并返回一个失败报告。
- 集线器简称 Hub，是物理层设备，具有多个端口，采用广播式通信方式。
- 虚电路
	- 采用面向连接的工作方式，具有连接建立、数据传输和连接释放 3 个阶段。
	- 虚电路不同于电路交换中的物理连接，而是逻辑连接，每段交换节点间的虚电路用逻辑信道号来标识来自同一个用户终端的各个分组。
	- 在一条物理线路上可以建立多个虚电路以达到资源共享。属于同一虚电路的分组均按照同一路由进行转发，且分组总是按发送顺序到达终点。
	- 虚电路对故障较为敏感，当节点出现故障时，所有通过故障的节点的虚电路都不能工作。
- 电路交换
	- 电路交换是面向连接的，一旦建立了连接，数据便可通过物理通路到达终端，因此传输时延小，传送的分组将按序到达。
	- 电路交换连接建立后，物理通路被通信双方独占，即使通信线路空闲，也不能供其他用户使用，因此线路利用率很低。

## 数据链路层

- IEEE802 系列标准把数据链路层分成 LLC（Logical Link Control，逻辑链路控制）和 MAC（Media Access Control，介质访问控制）两个子层。
	- 与接人到传输媒体有关的内容都放在 MAC 子层，而 LLC 子层则与传输媒体无关。
	- MAC 子层的主要功能包括数据帧的封装/卸装、帧的寻址和识别、帧的接收与发送、链路的管理等。
	- LLC 子层的功能主要包括建立和释放数据链路层的逻辑连接、差错控制、提供与网络层的接口等。
- PDU（协议数据单元）是对等层次之间传送的数据单位。以太网交换机是数据链路层设备，它的转发是根据目的地址来决定的，因此 PDU 地址就是目的物理地址。
- PPP（Point-to-Point Protocol，点对点协议）主要由 3 个部分组成：
	- 一个将 IP 数据报封装到串行链路的方法。
	- 一个链路控制协议，用于建立、配置和测试数据链路连接，并在不需要的时候释放。
	- 一套网络控制协议，每个协议支持不同的网络层协议，用于建立和配置不同的网络层协议。
- 在 OSI 参考模型中，数据链路层的功能有帧同步、差错控制、流量控制。
- 网桥工作在网络中的数据链路层，主要是用来实现局域网与局域网的互相连接。

### 令牌协议

- 以太网采用 CSMA/CD 协议，通过“载波侦听”和“冲突检测”机制避免数据冲突，不使用令牌。
- 令牌总线在逻辑环中传递单令牌，站点需等待令牌到达才能发送数据，同一时间仅有一个令牌存在，属于单令牌协议。
- 传统令牌环网（如 IEEE 802.5）采用单令牌机制，发送站需等待数据帧绕环返回后才释放新令牌，无法同时存在多个令牌。
- 光纤分布数据接口（FDDI）基于改进的令牌环技术，采用多令牌协议。站点发送完数据后立即释放新令牌，允许后续站点无需等待数据帧返回即可获取令牌。这种机制使环上可同时存在多个令牌，显著提高网络利用率

### 介质访问控制协议（MAC 协议）

- 例题：下列选项中，对正确接收到的数据帧进行确认的 MAC 协议是（D）。
	- A. CSMA
	- B. CDMA
	- C. CSMA/CD
	- D. CSMA/CA
	- 解析：
		- CSMA（载波侦听多路访问）：CSMA 协议通过“先侦听后发送”机制避免冲突，但不提供数据帧确认功能。
		- CDMA（码分多址）：CDMA 是一种多址接入技术，通过编码区分用户，不属于 MAC 协议，且不涉及数据帧确认。
		- CSMA/CD（载波侦听多路访问/冲突检测）：CSMA/CD 在 CSMA 基础上增加了冲突检测功能，用于以太网中解决冲突问题，但不提供数据帧确认功能。
		- CSMA/CA（载波侦听多路访问/冲突避免）：CSMA/CA 通过“确认机制”确保数据帧正确接收。发送方在发送数据帧后，接收方会返回一个确认帧（ACK）。如果发送方未收到 ACK，则会重发数据帧。因此，CSMA/CA 支持数据帧确认。
- MAC 地址也称硬件地址或物理地址。一个网卡会有一个全球唯一固定的 MAC 地址，但可对应多个 IP 地址。IP 地址与 MAC 地址并不存在固定的绑定关系。ARP 命令可以将 IP 地址解析为 MAC 地址。MAC 地址由 48 位二进制数组成。

## 网络层

- 在 IP 数据报首部中有两个有关长度的字段，一个为首部长度字段，一个为总长度字段。其中，首部长度字段以 32 比特为计数单位，总长度字段以 8 比特为计数单位。
	- IP 数据报的首部有一个 20 字节的定长部分和一个可选的变长部分。首部长度域指明了该首部有多长，以 32 位字的长度为单位。首部长度最小为 20 字节，表明首部没有可选项，最大为 60 字节。总长度域包含了该数据报中的所有内容，即首部和数据，单位为字节，最大的长度为 65535 字节。
	- IPv6 的头部长度为固定的 40 字节，包括版本、流量类别、流标签、负载长度、下一个头部、跳数限制、源地址和目的地址等字段。与 IPv4 相比，IPv6 的头部结构更加简化，去除了可变长度的选项字段，提高了路由效率。
- 在互联网中，IP 数据报的传输需要经由源主机和中途路由器到达目的主机，通常源主机和中途路由器都不知道 IP 数据报到达目的主机需要经过的完整路径。
- 在 IP 地址分类中，A 类地址高 8 位的范围是 1 到 126，B 类 IP 地址高 8 位的范围是 128 到 191，C 类 IP 地址高 8 位的范围是 192 到 223，D 类 IP 地址高 8 位的范围是 224 到 239。
	- 在 IPv4 中，多播地址属于 D 类地址。
- 在 IP 地址中，如果是 A 类地址，前 8 位表示网络号，后 24 位表示主机号，如果是 B 类地址，前 16 位表示网络号，后 16 位表示主机号，如果是 C 类地址，前 24 位表示网络号，后 8 位表示主机号。
- 路由器的发展表现在从基于软件实现路由功能的单总线 CPU 结构路由器，转向于基于硬件专用 芯片的路由交换的高性能的交换路由器。
- 在互联网中，IP 数据报从源节点到目的节点可能需要经过多个网络和路由器。在整个传输过程中，IP 数据报报头中的源地址和目的地址都不会发生变化。
- 三层交换机是具有部分普通路由器功能的交换机，可以实现不同的 VLAN 间的通信。三层交换机既可操作在网络层，又几乎能够达到第二层交换机的技术。传统交换技术是在 OSI 模型的第二层数据链路层进行操作的，而三层交换技术是在 OSI 模型中的第三层网络层实现了数据报的高速转发。
- 当同一网段中的两台计算机分配了相同的 IP 地址时，会导致双方都会得到警告，但先入者继续工作，而后入者不能工作。
- 若路由器 R 因为拥塞丢弃 IP 数据报，此时 R 可向发出该 IP 数据报的源主机发送的 ICMP 报文的类型是源抑制，以告知源点放慢 IP 数据报的发送速率。
- DNS 服务器的查询方式有递归查询和迭代查询。
	- 主机向本地服务器的查询一般采用递归查询。对于递归查询，当主机发出查询请求后，如果本地域名服务器不知道被查询域名的 IP 地址，那么本地域名服务器就以 DNS 客户的身份向其他根域名服务器继续发出查询请求报文，而不是让主机自己进行下一步查询。递归查询的返回结果要么是所要查询的 IP 地址，要么报错，表示无法查询到所需的 IP 地址。
	- 本地域名服务器向根域名服务器的查询通常采用迭代查询。对于迭代查询，当根域名服务器收到本地域名服务器发出的迭代查询请求时，要么给出所要查询的 IP 地址，要么告诉本地服务器”下一步应该向哪个服务器进行查询“，然后让本地域名服务器进行后续的查询。

## 运输层

- 在 OSI 参考模型中，自下而上第一个提供端到端服务的层次是运输层。
- 端口类型
	- 熟知端口是预留给特定服务的端口号（如 HTTP 的 80 端口、FTP 的 21 端口），范围是 0 - 1023。
	- 短暂端口是客户端临时使用的端口号，范围通常是 1024 - 65535。
	- 登记端口是为特定应用程序注册的端口号，范围是 1024 - 49151。
- UDP 首部包括源端口、目的端口、长度和检验和。目的地址是在计算检验和的时候加上去的伪首部，不在 UDP 的报文首部中。

## 应用层

- 常用端口服务
	- 域名解析服务 DNS 使用 53 号端口。
	- 远程终端协议 TELNET 使用 23 号端口。
	- 简单网络管理协议 SNMP 使用 161 号端口。
	- 简单文件传输协议 TFTP 使用 69 号端口。
- FTP 是基于 TCP 的，使用 20 和 21 号端口，TFTP 是基于 UDP 的，使用 69 号端口。当 FTP 客户端和服务器之间传送命令时，通过控制连接传送,当 FTP 客户端和服务器之间传送数据文件时，则通过数据连接传送。
- 可以动态地为主机配置 IP 地址的协议是 DHCP（动态主机配置协议）。
- BGP（边界网关协议）使用 TCP 协议（端口 179）进行可靠传输，因此 BGP 报文封装在 TCP 报文中传输。
- RIP（Routing Information Protocol）是一种基于距离 - 矢量算法的路由协议，通过跳数（hop count）来计算最佳路由。RIP 规定最大跳数为 15，跳数为 16 时表示网络不可达。RIP 默认每 30 秒发送一次路由更新信息。RIP 是一种内部网关协议（IGP），用于在自治系统（AS）内部进行路由选择，而不是用于不同自治系统之间的路由（外部网关协议，如 BGP）。
- 邮件
	- SMTP 支持从用户代理向邮件服务器发送邮件，支持在邮件服务器之间发送邮件。SMTP 协议是基于 ASCII 码的。
	- POP3 支持从邮件服务器向用户代理发送邮件。
